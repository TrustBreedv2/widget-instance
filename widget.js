!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@trustbreed/widget.js",[],t):"object"==typeof exports?exports["@trustbreed/widget.js"]=t():e["@trustbreed/widget.js"]=t()}(this,(()=>(()=>{var e={225:(e,t,i)=>{!function(){"use strict";const t=i(555),o=e=>{throw new Error(`${e} is required`)};function n(e){if(!e)throw new Error("No arguments provided");const{clientId:i,apiKey:r,companyId:d,userType:s,user:l,mode:a="PROD",theme:p="#ed4a4f",...c}=e;if("object"!=typeof arguments[0]&&(console.warn(`DEPRECATED: TRUSTBREED EXPECTED 1 ARGUMENT, BUT GOT ${arguments.length}`),i=arguments[1].clientId||o("CLIENT ID"),r=arguments[1].apiKey||o("API KEY"),d=arguments[1].companyId||o("Trustbreed company ID"),s=arguments[1].userType||o("USER TYPE"),l=arguments[1].user||{},a=arguments[1].mode,p=arguments[1].mode,c={}),!(this instanceof n))return new n({clientId:i,apiKey:r,companyId:d,userType:s,user:l,mode:a,theme:p,...c});if(this.clientId=i||o("CLIENT ID"),this.apiKey=r||o("API KEY"),this.companyId=d||o("Trustbreed company ID"),this.userType=s||o("USER TYPE"),!["NEW","EXISTING"].includes(s.toUpperCase()))throw new Error('Please provide a valid userType argument of either "NEW" or "EXISTING"');if("EXISTING"===s.toUpperCase()){if(!l.hasOwnProperty("email")||!l.hasOwnProperty("name"))throw new Error("Please provide a valid user object, user object must contain a valid email and name");this.user=l||o("USER OBJECT")}this.mode=a,this.theme=p,n.prototype.utils=t()}n.prototype.close=function(){n.prototype.utils.closeWidget()},n.prototype.open=function(e){n.prototype.utils.addStyle(),n.prototype.utils.init({clientId:this.clientId,apiKey:this.apiKey,companyId:this.companyId,userType:this.userType,user:this.user||{},mode:this.mode,theme:this.theme}),n.prototype.utils.openWidget(this.onEvent),n.prototype.utils.preventParentVerticalScroll()},n.prototype.close=function(){n.prototype.utils.allowParentVerticalScroll(),window.removeEventListener("message",this.eventHandler,!1),n.prototype.utils.closeWidget(),this.onClose()},"undefined"!=typeof window&&(window.Trustbreed=n),e.exports=n}()},545:e=>{e.exports="https://widget.trustbreed.com/"},555:(e,t,i)=>{e.exports=()=>{function e(){!function(){const e=document.getElementById("trustbreed--widget-div"),t=document.getElementById("trustbreed--frame-id");e.style.display="none",t.style.display="none",e.style.visibility="hidden",t.style.visibility="hidden"}()}function t(){let e=document.createElement("div");e.setAttribute("id","trustbreed--app-loader"),e.classList.add("lds-ripple");for(let t=0;t<2;t++){let t=document.createElement("div");e.appendChild(t)}return e}return{init:function(s){document.getElementById("trustbreed--widget-div")&&document.getElementById("trustbreed--frame-id")&&document.getElementById("trustbreed--widget-div").remove();const{clientId:l,apiKey:a,companyId:p,userType:c,user:u,mode:m,theme:y}=s,h=new URL(i(545));h.searchParams.set("clientId",l),h.searchParams.set("apiKey",a),h.searchParams.set("companyId",p),h.searchParams.set("userType",c),h.searchParams.set("mode",m),h.searchParams.set("theme",y),h.searchParams.set("referrer",window.location.href),Object.keys(u).map((e=>{h.searchParams.set(e,u[e])}));const w=document.createElement("div");w.setAttribute("id","trustbreed--widget-div"),w.setAttribute("style",window.innerWidth>600?o:n),document.body.insertBefore(w,document.body.childNodes[0]);const b=document.createElement("IFRAME");b.setAttribute("src",`${h.href}`),b.setAttribute("style",window.innerWidth>600?r:d),b.setAttribute("id","trustbreed--frame-id"),b.setAttribute("allowfullscreen","true"),b.setAttribute("frameborder",0),b.setAttribute("title","trustbreed"),b.setAttribute("allow","clipboard-read; clipboard-write"),b.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-top-navigation-by-user-activation allow-popups");let f=document.getElementById("trustbreed--app-loader");function g(t){if("https://widget.trustbreed.com"!==t.origin)return;"closeWidget"===(t.data||"")&&e()}b.onload=function(){"visible"===b.style.visibility&&(f.style.display="none")},f=t(),document.getElementById("trustbreed--widget-div").appendChild(f),document.getElementById("trustbreed--widget-div").appendChild(b),window.addEventListener?window.addEventListener("message",g,!1):window.attachEvent&&window.attachEvent("onmessage",g,!1)},openWidget:function(e){const t=document.getElementById("trustbreed--widget-div"),i=document.getElementById("trustbreed--app-loader"),o=document.getElementById("trustbreed--frame-id");t.style.visibility="visible",t.style.display="flex",i.style.display="block",setTimeout((()=>{!function(){const e=document.getElementById("trustbreed--widget-div"),t=document.getElementById("trustbreed--frame-id");e.style.display="flex",t.style.display="block",e.style.visibility="visible",t.style.visibility="visible"}(),o.focus({preventScroll:!1}),t.focus({preventScroll:!1}),e?.({timestamp:Date.now()})}),2e3)},closeWidget:e,addStyle:function(){let e=document.createElement("style");e.type="text/css",e.innerText=s,document.head.appendChild(e)},createLoader:t,preventParentVerticalScroll:function(){window.flHeight=window.document.body.style.height,window.flOverflowY=window.document.body.style.overflowY,window.document.body.style.height="100vh",window.document.body.style.overflowY="hidden"},allowParentVerticalScroll:function(){window.flHeight?window.document.body.style.height=window.flHeight:window.document.body.style.height="unset",window.flOverflowY?window.document.body.style.overflowY=window.flOverflowY:window.document.body.style.overflowY="unset"}}};const o="position:fixed; overflow: hidden; display: none; justify-content: center; align-items: center;z-index: 9999999;color: transparent;background:rgba(255, 255, 255, 0.32);visibility:hidden;margin: 0; bottom:2rem; right:2rem; height: 700px; width: 400px; border-radius: 24px",n="position:fixed; overflow: hidden; display: none; justify-content: center; align-items: center;z-index: 9999999;color: transparent;background:rgba(255, 255, 255, 0.32);visibility:hidden;margin: 0; bottom:0; right:0; height: 100%; width: 100%; /* From https://css.glass */\nbackground: rgba(255, 255, 255, 0.28);\nbox-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\nbackdrop-filter: blur(3.5px);\n-webkit-backdrop-filter: blur(3.5px);",r="position: fixed;display: none;overflow: hidden;z-index: 9999999; border-radius: 24px; transition: opacity 0.3s ease 0s;visibility:hidden;margin: 0;bottom:2rem; right:2rem; height: 700px; width: 400px; box-shadow: 4px 0px 37px 2px rgba(0, 0, 0, 0.45); -webkit-box-shadow: 4px 0px 37px 2px rgba(0, 0, 0, 0.45); -moz-box-shadow: 4px 0px 37px 2px rgba(0, 0, 0, 0.45);",d="position: fixed;display: none;overflow: hidden;z-index: 9999999; border-radius: 24px;transition: opacity 0.3s ease 0s;visibility:hidden;margin: 0;top: 50%; right: 50%; transform: translate(50%, -50%); height: 100%; max-width: 400px; max-height: 700px; width: 100%;  box-shadow: 4px 0px 37px 2px rgba(0, 0, 0, 0.45); -webkit-box-shadow: 4px 0px 37px 2px rgba(0, 0, 0, 0.45); -moz-box-shadow: 4px 0px 37px 2px rgba(0, 0, 0, 0.45);",s="\n  .lds-ripple {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n    }\n    .lds-ripple div {\n    position: absolute;\n    border: 4px solid #A7A7A7;\n    opacity: 1;\n    border-radius: 50%;\n    animation: lds-ripple 1s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n    }\n    .lds-ripple div:nth-child(2) {\n    animation-delay: -0.5s;\n    }\n    @keyframes lds-ripple {\n    0% {\n        top: 36px;\n        left: 36px;\n        width: 0;\n        height: 0;\n        opacity: 1;\n    }\n    100% {\n        top: 0px;\n        left: 0px;\n        width: 72px;\n        height: 72px;\n        opacity: 0;\n    }\n    }\n  "}},t={};function i(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,i),r.exports}return i(545),i(555),i(225)})()));